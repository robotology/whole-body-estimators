# Copyright (C) 2016 Istituto Italiano di Tecnologia  iCub Facility
# Authors: Silvio Traversaro
# CopyPolicy: Released under the terms of the LGPLv2.1 or later, see LGPL.TXT

cmake_minimum_required(VERSION 3.5)

project(VectorsCollection)

yarp_idl_to_dir(INPUT_FILES VectorsCollection.thrift
                    OUTPUT_DIR ${CMAKE_CURRENT_BINARY_DIR}/autogenerated
                    SOURCES_VAR WBDSETTINGS_SRC
                    HEADERS_VAR WBDSETTINGS_HEADERS
                    INCLUDE_DIRS_VAR WBDSETTINGS_INCLUDES)

add_library(VectorsCollection STATIC ${WBDSETTINGS_SRC} ${WBDSETTINGS_HEADERS})
target_include_directories(VectorsCollection PUBLIC ${WBDSETTINGS_INCLUDES})
set_property(TARGET VectorsCollection PROPERTY POSITION_INDEPENDENT_CODE ON)
target_link_libraries(VectorsCollection ${YARP_LIBRARIES})

target_include_directories(VectorsCollection PUBLIC
                            "$<BUILD_INTERFACE:${WBDSETTINGS_INCLUDES}>"
                            "$<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}/wholeBodyDynamics>")

set_property(TARGET VectorsCollection PROPERTY PUBLIC_HEADER ${WBDSETTINGS_HEADERS})

install(TARGETS VectorsCollection
        RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}" COMPONENT bin
        LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}" COMPONENT shlib
        ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}" COMPONENT lib
        PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/wholeBodyDynamics)

