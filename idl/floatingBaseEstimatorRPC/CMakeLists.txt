# Copyright (C) 2016 Istituto Italiano di Tecnologia  iCub Facility
# Authors: Silvio Traversaro
# CopyPolicy: Released under the terms of the LGPLv2.1 or later, see LGPL.TXT

yarp_idl_to_dir(INPUT_FILES codyco/floatingBaseEstimatorRPC.thrift
                    OUTPUT_DIR ${CMAKE_CURRENT_SOURCE_DIR}/autogenerated
                    SOURCES_VAR WBDIDLSERVER_SRC
                    HEADERS_VAR WBDIDLSERVER_HEADERS
                    INCLUDE_DIRS_VAR WBDIDLSERVER_INCLUDES)

add_library(floatingBaseEstimatorRPC ${WBDIDLSERVER_SRC} ${WBDIDLSERVER_HEADERS})
target_link_libraries(floatingBaseEstimatorRPC ${YARP_LIBRARIES})

target_include_directories(floatingBaseEstimatorRPC PUBLIC
                           "$<BUILD_INTERFACE:${WBDIDLSERVER_INCLUDES}>"
                           "$<INSTALL_INTERFACE:${CMAKE_INSTALL_FULL_INCLUDEDIR}/codyco>")

set_property(TARGET floatingBaseEstimatorRPC PROPERTY PUBLIC_HEADER ${WBDIDLSERVER_HEADERS})

install(TARGETS floatingBaseEstimatorRPC
        EXPORT ${VARS_PREFIX}
        RUNTIME DESTINATION "${CMAKE_INSTALL_FULL_BINDIR}" COMPONENT bin
        LIBRARY DESTINATION "${CMAKE_INSTALL_FULL_LIBDIR}" COMPONENT shlib
        ARCHIVE DESTINATION "${CMAKE_INSTALL_FULL_LIBDIR}" COMPONENT lib
        PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_FULL_INCLUDEDIR}/codyco)

# Add to targets exported by CMake
set_property(GLOBAL APPEND PROPERTY ${VARS_PREFIX}_TARGETS floatingBaseEstimatorRPC)

